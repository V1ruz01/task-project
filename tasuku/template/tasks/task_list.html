{% extends 'base.html' %}
{% block content %}

<h2 style="text-align:center;">My Tasks</h2>

<!-- ðŸ” Ð¤Ð¾Ñ€Ð¼Ð° Ñ„Ñ–Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ñ–Ñ— -->
<form method="get" style="margin: 20px auto; max-width: 700px; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
  <div style="display: flex; gap: 10px; flex-wrap: wrap;">
    <div style="flex: 1;">
      <label for="id_status">Status:</label>
      {{ form.status_filtr }}
    </div>
  </div>

  <div style="margin-top: 10px; text-align: right;">
    <button type="submit" style="background: #007bff; color: white; border: none; padding: 6px 12px; border-radius: 5px;">Ð¤Ñ–Ð»ÑŒÑ‚Ñ€ÑƒÐ²Ð°Ñ‚Ð¸</button>
    <a href="{% url 'tasks:task_list' %}" style="margin-left: 10px; text-decoration: none; color: #555;">Ð¡ÐºÐ¸Ð½ÑƒÑ‚Ð¸</a>
  </div>
</form>

<!-- âž• ÐšÐ½Ð¾Ð¿ÐºÐ° Ð´Ð¾Ð´Ð°Ð²Ð°Ð½Ð½Ñ -->
<div style="text-align: center; margin: 20px 0;">
  <a href="{% url 'tasks:task_create' %}"
     style="background-color: #28a745; color: white; padding: 10px 20px;
            border-radius: 6px; text-decoration: none; font-weight: bold;">
    + Add a Task
  </a>
</div>

<hr>

<!-- ðŸ“‹ Ð¢Ð°Ð±Ð»Ð¸Ñ†Ñ Ð·Ð°Ð²Ð´Ð°Ð½ÑŒ -->
<table style="width: 100%; border-collapse: collapse; font-family: sans-serif;">
  <thead>
    <tr style="background-color: #f4f4f4;">
      <th style="border: 1px solid #ccc; padding: 8px;">Name</th>
      <th style="border: 1px solid #ccc; padding: 8px;">Status</th>
      <th style="border: 1px solid #ccc; padding: 8px;">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for task in tasks %}
      <tr>
        <td style="border: 1px solid #ccc; padding: 8px;">{{ task.title }}</td>

        <!-- ðŸŽ¨ ÐºÐ¾Ð»ÑŒÐ¾Ñ€Ð¸ Ð´Ð»Ñ ÑÑ‚Ð°Ñ‚ÑƒÑÑ–Ð² -->
        <td style="border: 1px solid #ccc; padding: 8px;
          {% if task.status == 'todo' %}background-color:#f8d7da;{% endif %}
          {% if task.status == 'in_progress' %}background-color:#fff3cd;{% endif %}
          {% if task.status == 'done' %}background-color:#d4edda;{% endif %}
          ">
          {{ task.get_status_display }}
        </td>

        <td style="border: 1px solid #ccc; padding: 8px;">
          {% if task.priority == 'high' %}
            <span style="color: red; font-weight: bold;">{{ task.get_priority_display }}</span>
          {% elif task.priority == 'medium' %}
            <span style="color: orange;">{{ task.get_priority_display }}</span>
          {% else %}
            <span style="color: green;">{{ task.get_priority_display }}</span>
          {% endif %}
        </td>

        <td style="border: 1px solid #ccc; padding: 8px;">
          {% if task.due_date %}
            {{ task.due_date|date:"d.m.Y" }}
          {% else %}
            â€”
          {% endif %}
        </td>

        <td style="border: 1px solid #ccc; padding: 8px;">
          <a href="{% url 'tasks:task_detail' task.pk %}">Details</a> |
          <a href="{% url 'tasks:task_update' task.pk %}">Edit</a> |
          <a href="{% url 'tasks:task_delete' task.pk %}">Delete</a>
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="5" style="text-align:center; padding: 20px;">No Tasks! You are Free! ðŸ˜Œ</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}